var Autosuggest=function(){"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function i(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function s(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return a(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,s=new Array(t);i<t;i++)s[i]=e[i];return s}var n="classList"in document.createElement("_")?function(e,t){return e.classList.contains(t)}:function(e,t){return e.className.indexOf(t)>=0};return function(){function a(t,c){var r,o=this,d=c.delay,l=c.clearButton,u=c.howManyCharacters,h=c.scrollIntoView,m=c.instruction,f=c.onResults,p=c.selectFirst,L=c.onSearch,v=c.onSubmit,b=void 0===v?function(){}:v;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i(this,"setDefault",(function(){o.searchId.setAttribute("aria-owns","".concat(o.search,"-list")),o.searchId.setAttribute("aria-expanded",!1),o.searchId.setAttribute("aria-describedby","".concat(o.search,"-initInstruction")),o.searchId.setAttribute("aria-autocomplete","both"),o.searchId.setAttribute("aria-activedescendant",""),o.searchId.setAttribute("role","combobox"),o.searchId.classList.remove("expanded"),n(o.matchList,o.isActive)&&o.outputSearch.classList.remove(o.isActive),o.activeElement=document.querySelector(".".concat(o.activeList)),o.activeElement&&o.actionsOnTheElementLi(o.activeElement,"")})),i(this,"initialize",(function(){o.clearButton&&o.createClearButton();var e=null;o.searchId.addEventListener("input",(function(t){var i=t.target;o.valueFromSearch=i.value,o.classSearch=i.parentNode,o.escapedChar=o.valueFromSearch.replace(/[`~!@#$%^&*()_|+\-=÷¿?;:'",.<>\{\}\[\]\\\/]/g,""),clearTimeout(e),e=setTimeout((function(){o.searchItem(o.escapedChar.trim())}),o.delay)}))})),i(this,"createOutputSearch",(function(){o.outputSearch=document.createElement("ul"),o.outputSearch.id=o.searchOutputUl,o.outputSearch.className="auto-output-search",o.outputSearch.tabIndex=-1,o.outputSearch.setAttribute("role","listbox"),o.searchId.parentNode.insertBefore(o.outputSearch,o.searchId.nextSibling),o.matchList=document.getElementById(o.searchOutputUl),o.initInstruction()})),i(this,"searchItem",(function(t){if(o.searchId.parentNode.classList.add(o.isLoading),o.howManyCharacters>t.length)return o.classSearch.classList.remove(o.isLoading),o.hiddenButtonHide(),void o.setDefault();o.onSearch(t).then((function(i){var a,n=Array.isArray(i)?s(i):JSON.parse(JSON.stringify(i));o.classSearch.classList.remove(o.isLoading),0===i.length&&(o.hiddenButtonHide(),o.searchId.classList.remove("expanded"),o.setDefault()),(i.length>0||(a=i)&&"object"===e(a)&&a.constructor===Object)&&o.outputHtml(n,t)}))})),i(this,"initInstruction",(function(){o.describedby=document.createElement("span"),o.describedby.id="".concat(o.search,"-initInstruction"),o.describedby.className="init-instruction",o.textContent=document.createTextNode(o.instruction),o.outputSearch.insertAdjacentElement("afterend",o.describedby),o.describedby.appendChild(o.textContent)})),i(this,"closeOutputMatchesList",(function(e){e.target.id!==o.search&&(o.outputSearch.scrollTop=0,o.setDefault())})),i(this,"selectFirstItem",(function(){var e=document.getElementById(o.searchOutputUl).firstElementChild;e.id="".concat(o.selectedOption,"-1"),e.setAttribute("aria-selected",!0),e.classList.add(o.activeList),o.ariaactivedescendant(o.searchId,"".concat(o.selectedOption,"-1")),o.selected=1})),i(this,"hiddenButtonHide",(function(){o.clearButton&&o.clearButton.classList.remove("hidden")})),i(this,"showLiItems",(function(){o.matchList.textContent.length>0&&(o.searchId.setAttribute("aria-expanded",!0),o.searchId.classList.add("expanded"),o.outputSearch.classList.add(o.isActive))})),i(this,"addTextFromLiToSearchInput",(function(e){var t=e.type,i=e.target;switch(t){case"click":o.getTextFromLi(i.closest("li")),o.selected=0;break;case"mouseenter":case"mouseleave":o.actionsOnTheElementLi(i,"mouseenter"===t)}})),i(this,"actionsOnTheElementLi",(function(e,t){o.checkActiveListExist=document.querySelector(".".concat(o.activeList)),o.checkActiveListExist&&o.checkActiveListExist.classList.remove(o.activeList),e.id=t?"".concat(o.selectedOption,"-").concat(o.indexLiSelected(e)):"",e.setAttribute("aria-selected",!!t),e.classList[t?"add":"remove"](o.activeList),o.ariaactivedescendant(o.searchId,t?"".concat(o.selectedOption,"-").concat(o.indexLiSelected(e)):null),o.selected=t?o.indexLiSelected(e):0})),i(this,"getTextFromLi",(function(e){o.getText=e.firstElementChild?e.firstElementChild:e,o.searchId.value=o.getText.textContent.trim(),o.outputSearch.scrollTop=0,o.setDefault(),o.onSubmit(o.getText.textContent.trim()),e.hasAttribute("data-elements")&&o.dataElements(e.getAttribute("data-elements"))})),i(this,"indexLiSelected",(function(e){return Array.prototype.indexOf.call(o.itemsLi,e)+1})),i(this,"handelEvent",(function(e){var t=e.keyCode;if(o.selectedLi=document.querySelector(".".concat(o.activeList)),"false"!==o.searchId.getAttribute("aria-expanded"))switch(t){case o.keyCodes.UP:if(o.itemsLi.length<=1&&o.selectFirst)return;o.selected-=1,o.selected<=0&&(o.selected=o.itemsLi.length),o.setAriaSelectedItem(o.itemsLi[o.selected-1]),o.removeAriaSelectedItem();break;case o.keyCodes.DOWN:if(o.itemsLi.length<=1&&o.selectFirst)return;o.selected+=1,o.selected>o.itemsLi.length&&(o.selected=1),o.setAriaSelectedItem(o.itemsLi[o.selected-1]),o.removeAriaSelectedItem();break;case o.keyCodes.ENTER:o.selectedLi?o.getTextFromLi(o.selectedLi):o.setDefault();break;case o.keyCodes.TAB:case o.keyCodes.ESC:o.setDefault()}})),i(this,"setAriaSelectedItem",(function(e){e.id="".concat(o.selectedOption,"-").concat(o.indexLiSelected(e)),e.setAttribute("aria-selected",!0),e.classList.add(o.activeList),o.ariaactivedescendant(o.searchId,"".concat(o.selectedOption,"-").concat(o.indexLiSelected(e))),o.scrollIntoView&&o.setTopView(e)})),i(this,"setTopView",(function(e){setTimeout((function(){e.scrollIntoView({behavior:"smooth"})}),0)})),i(this,"removeAriaSelectedItem",(function(){o.selectedLi&&(o.selectedLi.id="",o.selectedLi.classList.remove(o.activeList),o.selectedLi.setAttribute("aria-selected",!1))})),i(this,"ariaactivedescendant",(function(e,t){e.setAttribute("aria-activedescendant",t||"")})),i(this,"createClearButton",(function(){o.clearButton=document.createElement("button"),o.clearButton.id="auto-clear-".concat(o.search),o.clearButton.classList.add("auto-clear","hidden"),o.clearButton.setAttribute("type","button"),o.clearButton.setAttribute("aria-label","claar text from input"),o.searchId.insertAdjacentElement("afterend",o.clearButton)})),i(this,"handleClearButton",(function(e){e.target.classList.add("hidden"),o.searchId.value="",o.searchId.focus(),o.outputSearch.textContent="",o.setDefault()})),i(this,"dataElements",(function(e){e&&o.searchId.setAttribute("data-elements",e)})),this.search=t,this.searchId=document.getElementById(this.search),this.instruction=m||"When autocomplete results are available use up and down arrows to review and enter to select. Touch device users, explore by touch or with swipe gestures.",this.onResults=f,this.onSubmit=b,this.onSearch=(r=L,Boolean(r&&"function"==typeof r.then)?L:function(e){return Promise.resolve(L(e))}),this.delay=d||1e3,this.howManyCharacters=u||2,this.clearButton=l||!1,this.selectFirst=p||!1,this.scrollIntoView=h||!1,this.searchOutputUl="".concat(this.search,"-list"),this.isLoading="auto-is-loading",this.isActive="auto-is-active",this.activeList="selected",this.selectedOption="selectedOption",this.keyCodes={ESC:27,ENTER:13,UP:38,DOWN:40,TAB:9},this.initialize(),this.createOutputSearch(),this.setDefault()}var c,r,o;return c=a,(r=[{key:"outputHtml",value:function(e,t){this.selected=0,this.searchId.setAttribute("aria-expanded",!0),this.searchId.classList.add("expanded"),this.matchList.innerHTML=this.onResults(e,t),this.itemsLi=document.querySelectorAll("#".concat(this.searchOutputUl," > li")),this.matchList.classList.add(this.isActive),document.addEventListener("click",this.closeOutputMatchesList),this.searchId.addEventListener("keydown",this.handelEvent),this.searchId.addEventListener("click",this.showLiItems),this.matchList.addEventListener("click",this.addTextFromLiToSearchInput),this.clearButton.addEventListener("click",this.handleClearButton);for(var i=0;i<this.itemsLi.length;i++)this.itemsLi[i].addEventListener("mouseenter",this.addTextFromLiToSearchInput),this.itemsLi[i].addEventListener("mouseleave",this.addTextFromLiToSearchInput);this.selectFirst&&this.selectFirstItem(),this.hiddenButtonHide()}}])&&t(c.prototype,r),o&&t(c,o),a}()}();
