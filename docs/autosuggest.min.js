!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("Autosuggest",[],t):"object"==typeof exports?exports.Autosuggest=t():e.Autosuggest=t()}(window,(function(){return function(e){var t={};function i(r){if(t[r])return t[r].exports;var n=t[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,i),n.l=!0,n.exports}return i.m=e,i.c=t,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(r,n,function(t){return e[t]}.bind(null,n));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=1)}([function(e,t,i){},function(e,t,i){"use strict";i.r(t);i(0);var r=function(e){return Boolean(e&&"function"==typeof e.then)};function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var a=function(e){return e&&"object"===n(e)&&e.constructor===Object};function s(e){return function(e){if(Array.isArray(e))return c(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return c(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=e[i];return r}function o(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var d=function(){function e(t,i){var n=this,c=i.delay,o=i.clearButton,d=i.howManyCharacters,l=i.instruction,h=i.onResults,m=i.onSearch,f=i.onSubmit,p=void 0===f?function(){}:f;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),u(this,"setDefault",(function(){n.searchId.setAttribute("aria-owns","autocomplete-list"),n.searchId.setAttribute("aria-expanded",!1),n.searchId.setAttribute("aria-describedby","initInstruction"),n.searchId.setAttribute("aria-autocomplete","both"),n.searchId.setAttribute("aria-activedescendant",""),n.ariaActivedescendant=document.querySelector("[aria-activedescendant]"),n.searchId.classList.remove("expanded")})),u(this,"initialize",(function(){n.createClearButton();var e=null;n.searchId.addEventListener("input",(function(t){var i=t.target;n.valueFromSearch=i.value,n.classSearch=i.parentNode,n.escapedChar=n.valueFromSearch.replace(/[`~!@#$%^&*()_|+\-=÷¿?;:'",.<>\{\}\[\]\\\/]/g,""),clearTimeout(e),e=setTimeout((function(){n.searchItem(n.escapedChar.trim())}),n.delay)}))})),u(this,"createOutputSearch",(function(){n.outputSearch=document.createElement("ul"),n.outputSearch.id=n.searchOutputUl,n.outputSearch.className="auto-output-search",n.outputSearch.tabIndex=0,n.outputSearch.setAttribute("role","listbox"),n.searchId.parentNode.insertBefore(n.outputSearch,n.searchId.nextSibling),n.matchList=document.getElementById(n.searchOutputUl),n.initInstruction()})),u(this,"searchItem",(function(e){if(n.searchId.parentNode.classList.add(n.isLoading),n.howManyCharacters>e.length)return n.hiddenButtonHide(),n.classSearch.classList.remove(n.isLoading),n.outputSearch.classList.remove(n.isActive),void n.setDefault();n.onSearch(e).then((function(t){var i=Array.isArray(t)?s(t):JSON.parse(JSON.stringify(t));n.classSearch.classList.remove(n.isLoading),0===t.length&&(n.hiddenButtonHide(),n.searchId.classList.remove("expanded"),n.outputSearch.classList.remove(n.isActive),n.setDefault()),(t.length>0||a(t))&&n.outputHtml(i,e)}))})),u(this,"initInstruction",(function(){var e=document.createElement("span");e.id="initInstruction",e.className="init-instruction",n.textContent=document.createTextNode(n.instruction),n.outputSearch.insertAdjacentElement("afterend",e),e.appendChild(n.textContent)})),u(this,"closeOutputMatchesList",(function(e){e.target.id!==n.search&&(n.outputSearch.classList.remove(n.isActive),n.setDefault())})),u(this,"hiddenButtonHide",(function(){n.clearButton&&n.clearButton.classList.remove("hidden")})),u(this,"showLiItems",(function(){n.matchList.innerText.length>0&&(n.searchId.setAttribute("aria-expanded",!0),n.searchId.classList.add("expanded"),n.outputSearch.classList.add(n.isActive))})),u(this,"addTextFromLiToSearchInput",(function(e){var t=e.type,i=e.target,r=document.querySelector(".".concat(n.activeList));switch(t){case"click":if(n.selected=0,n.firstElementFromLi=i.closest("li"),!n.firstElementFromLi)return;n.searchId.value=n.firstElementFromLi.firstElementChild.innerText.trim(),n.dataElements(n.firstElementFromLi.getAttribute("data-elements")),n.outputSearch.classList.remove(n.isActive),n.setDefault(),n.onSubmit(n.firstElementFromLi.firstElementChild.innerText.trim());break;case"mouseenter":n.selected=0,r&&r.classList.remove(n.activeList),i.id=n.selectedOption,i.setAttribute("aria-selected",!0),i.classList.add(n.activeList),n.ariaactivedescendant(n.ariaActivedescendant,n.selectedOption);break;case"mouseleave":n.selected=0,r&&r.classList.remove(n.activeList),i.id="",i.setAttribute("aria-selected",!1),i.classList.remove(n.activeList),n.ariaactivedescendant(n.ariaActivedescendant)}})),u(this,"dataElements",(function(e){e&&n.searchId.setAttribute("data-elements",e)})),u(this,"handelEvent",(function(e){var t=e.keyCode;if(n.selectedLi=document.querySelector(".".concat(n.activeList)),"false"!==n.searchId.getAttribute("aria-expanded")){switch(t){case n.keyCodes.UP:n.selected+=1,n.selected>n.itemsLi.length&&(n.selected=1),n.setAriaSelectedItem(n.selected-1);break;case n.keyCodes.DOWN:n.selected-=1,n.selected<=0&&(n.selected=n.itemsLi.length),n.setAriaSelectedItem(n.selected-1);break;case n.keyCodes.ENTER:n.searchId.value=n.selectedLi.firstElementChild.innerText.trim(),n.dataElements(n.selectedLi.getAttribute("data-elements")),n.outputSearch.classList.remove(n.isActive),n.setDefault(),n.onSubmit(n.selectedLi.firstElementChild.innerText.trim());break;case n.keyCodes.ESC:n.outputSearch.classList.remove(n.isActive),n.setDefault()}n.selectedLi&&n.removeAriaSelectedItem()}})),u(this,"setAriaSelectedItem",(function(e){n.itemsLi[e].id=n.selectedOption,n.itemsLi[e].setAttribute("aria-selected",!0),n.itemsLi[e].classList.add(n.activeList),n.ariaactivedescendant(n.ariaActivedescendant,n.selectedOption)})),u(this,"removeAriaSelectedItem",(function(){n.selectedLi.id="",n.selectedLi.setAttribute("aria-selected",!1),n.selectedLi.classList.remove(n.activeList),n.ariaactivedescendant(n.ariaActivedescendant)})),u(this,"ariaactivedescendant",(function(e,t){e.setAttribute("aria-activedescendant",t||"")})),u(this,"createClearButton",(function(){n.clearButton&&(n.clearButton=document.createElement("button"),n.clearButton.id="auto-clear-".concat(n.search),n.clearButton.classList.add("auto-clear","hidden"),n.clearButton.setAttribute("type","button"),n.clearButton.setAttribute("aria-label","claar text from input"),n.searchId.insertAdjacentElement("afterend",n.clearButton),n.clearButton.addEventListener("click",n.handleClearButton))})),u(this,"handleClearButton",(function(e){e.target.classList.add("hidden"),n.searchId.value="",n.searchId.focus(),n.outputSearch.innerHTML="",n.setDefault()})),this.search=t,this.searchId=document.getElementById(this.search),this.instruction=l||"When autocomplete results are available use up and down arrows to review and enter to select. Touch device users, explore by touch or with swipe gestures.",this.onResults=h,this.onSubmit=p,this.onSearch=r(m)?m:function(e){return Promise.resolve(m(e))},this.delay=c||1e3,this.howManyCharacters=d||2,this.clearButton=o||!1,this.searchOutputUl="autocomplete-list",this.isLoading="auto-is-loading",this.isActive="auto-is-active",this.activeList="selected",this.selectedOption="selectedOption",this.keyCodes={ESC:27,ENTER:13,UP:40,DOWN:38,TAB:9},this.setDefault(),this.initialize(),this.createOutputSearch()}var t,i,n;return t=e,(i=[{key:"outputHtml",value:function(e,t){this.selected=0,this.searchId.setAttribute("aria-expanded",!0),this.searchId.classList.add("expanded"),this.matchList.innerHTML=this.onResults(e,t),this.searchOutpuli=document.getElementById(this.searchOutputUl),this.itemsLi=document.querySelectorAll("#".concat(this.searchOutputUl," > li")),this.matchList.classList.add(this.isActive),this.hiddenButtonHide(),this.searchId.addEventListener("keydown",this.handelEvent),this.searchId.addEventListener("click",this.showLiItems),this.matchList.addEventListener("click",this.addTextFromLiToSearchInput);for(var i=0;i<this.itemsLi.length;i++)this.itemsLi[i].addEventListener("mouseenter",this.addTextFromLiToSearchInput),this.itemsLi[i].addEventListener("mouseleave",this.addTextFromLiToSearchInput);document.addEventListener("click",this.closeOutputMatchesList)}}])&&o(t.prototype,i),n&&o(t,n),e}();t.default=d}]).default}));